language: node_js
node_js:
- node
git:
  depth: 1
branches:  
  only:
    - master
notifications:
- email: false
before_script:
  - npm test
script:
  - gulp
before_cache:
  - rm -rfv ./node_modules
  - rm -rfv ./tests
  - rm -rfv ./src
  - rm -rfv ./bin/barfsService
  - rm -rfv ./bin/fakeDataFeeder
  - rm -rfv ./bin/messageProcessor
  - rm -rfv ./bin/usersService
deploy:
 provider: azure_web_apps
 skip_cleanup: true
 verbose: true
